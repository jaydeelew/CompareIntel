[mypy]
# Mypy configuration for CompareIntel backend
# Tuned for FastAPI + SQLAlchemy codebase with gradual typing approach

# Python version
python_version = 3.11

# Enable practical type checking (non-strict mode for framework-heavy code)
strict = False
check_untyped_defs = True
disallow_untyped_defs = False
disallow_incomplete_defs = False
disallow_untyped_decorators = False
no_implicit_optional = True

# Warning configuration
warn_return_any = False
warn_unused_configs = True
warn_redundant_casts = True
warn_unused_ignores = False
warn_no_return = True
warn_unreachable = False

# Disable error codes that produce excessive false positives
# with FastAPI/SQLAlchemy/Pydantic patterns
disable_error_code = [
    "arg-type",
    "assignment",
    "call-overload",
    "index",
    "attr-defined",
    "union-attr",
    "var-annotated",
    "misc",
    "no-any-return",
    "valid-type",
    "operator",
    "return-value",
    "list-item",
    "type-var",
    "typeddict-unknown-key",
    "typeddict-item",
    "call-arg",
    "return",
]

# Show error codes
show_error_codes = True

# Follow imports
follow_imports = normal
ignore_missing_imports = True

# Platform-specific settings
platform = linux

# Exclude patterns
exclude = (?x)(^/(build|dist|venv|\.venv|env|\.env)/)

# Per-module options â€” tests get relaxed checking
[mypy-tests.*]
disallow_untyped_defs = False
disallow_incomplete_defs = False
check_untyped_defs = False
